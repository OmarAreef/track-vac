<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <title>Track vac</title>
    <link rel="stylesheet"  id= 'lang-ar' integrity="sha384-gXt9imSW0VcJVHezoNQsP+TNrjYXoGcrqBZJpry9zJt8PCQjobwmhMGaDHTASo9N" crossorigin="anonymous"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.rtl.min.css">
    <!-- <link id='lang-en' href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->
    <link id='lang-en' href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Raleway:100,300,400,500,700,900" rel="stylesheet">
    <link rel="stylesheet" href="/CSS/Homepage.css">
    <link rel="stylesheet" href="/CSS/overlay.css">
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="/css/starability.css">
    <!-- <link  rel="stylesheet"> -->
   

</head>

<script>
    const language = '<%-language %>';
</script>

<body class="">

    <div id="homepage">
        <div class="preloader w-100" id='preloader'>
            <div class="preloader-bounce container">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        <div id="background" class="container-fluid pt-2 mb-5" style="z-index: 1;  ">
           <!-- <div class="row">
                <div class="col-12">
                    <img src="/img/rectangle 31.png" class="image-fluid d-block position-absolute ml-2 px-2"
                        id='rectangle' alt="">
                </div>

            </div>-->
            
            
            <div class="row px-4 py-2 mt-2" id="main" >
               
                <div class="col-12">
                    <!-- <div id="up" class="p-2 container position-relative mb-4" style="z-index: 2;"> -->
                    <!-- <div id="header" class="container" style="z-index: 2;"> -->
                    <div class="row  d-flex align-items-center pr-2 mt-4 mr-2" style="z-index: 2;">
                        <div class="col-sm-5 col-md-4 col-6 " style="z-index: 2;">


                            <img id="logo" class="ms-n5 mt-n4 pb-4" src="/img/LOGO.png" style="z-index: 2;"></img>
                        </div>
                        <div class="col-sm-4 col-md-4 col-lg-3 col-xl-2 ms-auto" style="z-index: 2;">
                            <form action="/selectLanguage" method="post">
                                <div class="input-group mb-4">

                                    <span class="input-group-text" id="basic-addon1"><img id="globe" class="img-fluid"
                                            src="/img/globe.png" style="z-index: 2;"></img>
                                    </span>
                                    <select id="language" name="Language" style="z-index: 2;" class='form-control px-1'
                                        value="Language" placeholder="Language" onchange="this.form.submit()">
                                        <option value="en" class="EnglishL" <%=(language==='en' )? 'selected' : '' %>
                                            >English</option>
                                        <option value="ar" class="ArabicL" <%=(language==='ar' )? 'selected' : '' %>
                                            >Arabic</option>
                                    </select>

                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="row mb-1" style="z-index: 2;">
                        <h1 class="col-sm-8 col-md-7 col-lg-6 text Slogan1" style="font-weight: bolder; color: white;">
                            The best for you,
                        </h1>
                    </div>
                    <div class="row mb-2" style="z-index: 2;">
                        <h1 class="col-sm-8 col-md-7 col-lg-6 offset-1 text Slogan2"
                            style="font-weight: bolder; color: white; ">
                            showed for you </h1>
                    </div>

                    <div class="row mb-1" style="z-index: 2;">
                        <h2 class="col-sm-8 col-md-7 col-lg-6 text moreInfo" style="color: white;">Find and share
                            more information </h2>
                    </div>
                    <div class="row mb-2" style="z-index: 2;">
                        <h2 class="col-sm-8 col-md-7 col-lg-6 col-xl-5 ms-4 text vaccineHolders" style="color: white;">
                            about vaccine
                            Holders </h2>
                    </div>

                    <div class="row ms-3" style="z-index: 2;">
                        <div class="col-sm-8 col-md-6 col-lg-4 col-xl-3 mb-3 ">

                            <a class="menu text btn tracking" id="Starttracking" style="z-index: 2;" href="#start">Start
                                Tracking
                            </a>

                        </div>
                        <div class="col-sm-8 col-md-4 col-lg-4 col-xl-3">

                            <a class="menu text btn aboutUs" style="z-index: 2;" id="Aboutus" href="/about">About
                                us</a>

                        </div>
                        <!-- <a class="menu text" href="#start" id= "Starttracking">Start
                            Tracking</a>
                        <a class="menu text" href="/about" id="Aboutus">About
                            us</a></button> -->
                    </div>

                    <!-- </div> -->
                    <!-- </div> -->
                </div>
            </div>



        </div>
        <div class="scroll-down next-section animate data-animate" style="background-color: azure;  z-index: 3; min-height: 10vh;
        padding-top: 5px; ">

            <a href="#start"><img class="scroll" src="/img/Vector.png" style="width: 2%; z-index: 3;"></a>

            <div style="z-index: 3;">
                <!-- <p style="z-index: 3; margin-bottom: 0px;">Scroll Down</p> -->
            </div>
        </div>

        <div id="start" class="container-fluid" style="width: 100%; height:fit-content; background: rgba(255, 255, 255, 0.2);
             box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25); ">
            <%- include('partials/navBar_nocenter.ejs') %>

                <div class="row mx-2 mt-5 py-2">
                    <div id="filters" class="col-sm-9 col-md-5 col-lg-3 container mb-3" style="z-index: 2; height:100%">
                        <div class="row mb-2 pt-3">
                            <h1 class="col-6 offset-3 filters">Filters</h1>
                        </div>
                        <div class="row mb-n2">
                            <div class="col-sm-8 col-12 d-flex justify-content-start ms-2" class="form-group">
                                <label for="inputState" style="font-size: x-large;"
                                    class="governorates">Governorates</label>
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-sm-10 col-12" class="form-group">
                                <select id="eventtype1" class="form-control">
                                    <option value="" disabled selected hidden>
                                        Select governorate
                                    </option>
                                    <% for(let govern of governorates) { %>

                                        <%if(governorate===govern){%>
                                            <option selected>
                                                <%= govern %>
                                            </option>
                                            <%} else { %>
                                                <option>
                                                    <%= govern %>
                                                </option>
                                                <%}%>

                                                    <% } %>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-n2">
                            <div class="col-sm-8 col-12 d-flex justify-content-start ms-2" class="form-group">
                                <label for="inputState" style="font-size: x-large;" class='districts'>Districts</label>
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-sm-10 col-12" class="form-group">
                                <select id="eventtype2" class="form-control">
                                    <option value="" disabled selected hidden>
                                        Select district
                                    </option>
                                    <% for(let dist of districts) { %>
                                        <%if(district===dist){%>
                                            <option selected>
                                                <%= dist %>
                                            </option>
                                            <%} else { %>
                                                <option>
                                                    <%= dist %>
                                                </option>
                                                <%}%>
                                                    <% } %>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-n2">
                            <div class="col-sm-8 col-12 d-flex justify-content-start ms-2" class="form-group">
                                <label for="inputState" style="font-size: x-large;" class="centers">Centers</label>
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-sm-10 col-12" class="form-group">
                                <select id="eventtype3" class="form-control">
                                    <option value="" disabled selected hidden>
                                        Select center
                                    </option>
                                    <% for(let cent of centers) { %>
                                        <%if(name===cent){%>
                                            <option selected>
                                                <%= cent %>
                                            </option>
                                            <%} else { %>
                                                <option>
                                                    <%= cent %>
                                                </option>
                                                <%}%>
                                                    <% } %>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div id="results" class="col-sm-9 col-md-6 col-lg-4 container thumb overflow-auto mb-3"
                        style="z-index: 2; min-height: 326px; min-width: fit-content;">
                        <div class="row mb-1 pt-3">
                            <h1 class="col-6 offset-3 results">Results</h1>
                        </div>
                        <div class="row mb-4">
                            <div class="col-6 offset-3">
                                <form class="px-3 py-2" id="live-search" action="" class="styled" method="post">
                                    <fieldset>
                                        <input type="text" class="text-input thumb" id="filter" placeholder="search" />
                                    </fieldset>
                                </form>
                            </div>
                        </div>


                        <nav class='search'>
                            <ul>
                                <%for(let center of centerHelper) {%>
                                    <li><a id="center" href="<%= center._id %>">
                                            <div class="row">
                                                <div class="col-6 offset-3 mb-1">
                                                    <% if (language==='ar' ) { %>
                                                        <%= center.districtArabic%>, <%= center.governorateArabic%>
                                                                <% } else {%>
                                                                    <%= center.district%>, <%= center.governorate%>
                                                                            <%}%>
                                                </div>
                                            </div>
                                            <div class="row d-flex align-items-center">

                                               
                                                <div class="col-6">
                                                    <% if (language==='ar' ) { %>
                                                    <%= center.nameArabic %>
                                                    <% } else {%>
                                                        <%= center.name%>
                                                        <%}%>
                                                </div>
                                                <div class="col-5 ms-auto">
                                                    <p class="starability-result"
                                                        data-rating="<%=Math.round(center.avgRating) %>">
                                                    </p>
                                                </div>
                                            </div>

                                        </a>
                                        <hr>
                                    </li>
                                    <% }%>
                            </ul>
                        </nav>

                        <span id="filter-count"></span>
                    </div>

                    <div class="col-sm-9 col-md-6 col-lg-4 thumb container" id="map" style=" height:300px">
                    </div>


                </div>




        </div>

        <!-- Optional JavaScript; choose one of the two! -->

        <%- include('partials/footer.ejs') %>
    </div>

    <script src='https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.js'></script>
    <script>
        const vacCenters = <%- JSON.stringify(centerHelper); %>
    </script>


    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"
        integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js"
        integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/"
        crossorigin="anonymous"></script>


    <script src="/javaScripts/Homepage.js"></script>
    <script src="/javaScripts/signin.js"></script>




</body>
<script>
        $(document).on('ready', function () {
            $("#eventtype1").on('change', function () {
                var e1 = $(this).val();
                window.location.href = "/?governorate=" + e1 + "#results";
            });
            $("#eventtype2").on('change', function () {
                var e1 = $("#eventtype1").val();
                var e2 = $("#eventtype2").val();
                location.href = "/?governorate=" + e1 + "&district=" + e2 + "#results";
            });
            $("#eventtype3").on('change', function () {
                var e1 = $("#eventtype1").val();
                var e2 = $("#eventtype2").val();
                var e3 = $("#eventtype3").val();
                location.href = "/?governorate=" + e1 + "&district=" + e2 + "&name=" + e3 + "#results";
            });


        });

    $(document).ready(function () {
        $("#filter").keyup(function () {
            var filter = $(this).val(), count = 0;
            $(".search ul li").each(function () {
                if ($(this).text().search(new RegExp(filter, "i")) < 0) {
                    $(this).fadeOut();
                } else {
                    $(this).show();
                    count++;
                }
            });

            var numberItems = count;
            $("#filter-count").text("Number of Filter = " + count);
        });
    });
</script>


</html>